/* src/plugins/Arm-Control/ArmControlView.css */

/* Main container for the entire arm control interface */
.arm-control-container {
    display: flex;
    flex-direction: column; /* Stacks children vertically (joysticks-wrapper and controls-section) */
    align-items: center; /* Centers items horizontally within this container */
    justify-content: flex-start;
    padding: 5px; /* Reduced from 10px: Less padding around the entire interface */
    background-color: #2c2c2c; /* Dark background */
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    font-family: 'Inter', sans-serif;
    color: #e0e0e0; /* Light text color */
    height: 350px; /* Take full height of its parent */
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
    overflow: auto; /* Add scrollbars if content overflows */
    gap: 5px; /* Reduced from 10px: Less vertical space between sections */
    width: 350px; /* CRITICAL CHANGE: Set a fixed width for the entire panel (e.g., 200px for two 90px joysticks + gap + padding) */
    margin-left: 5px; /* Add a small margin from the left edge of the page */
    margin-right: auto; /* Push the entire panel to the left, consuming remaining space on the right */
}

/* Wrapper for the two joysticks to arrange them side-by-side */
.joysticks-wrapper {
    display: flex; /* Enables flexbox for children (joystick-group) */
    flex-wrap: wrap; /* Allows joysticks to wrap to the next line if not enough space */
    gap: 15px; /* Reduced from 10px: LESS HORIZONTAL SPACE BETWEEN THE TWO JOYSTICK GROUPS */
    justify-content: center; /* Centers joysticks if there's extra space */
    margin-bottom: 5px; /* Reduced from 10px: Less space below the joystick area */
    width: fit-content; /* This helps collapse the wrapper to its content's size */
}

/* Individual container for each joystick (canvas + label) */
.joystick-group {
    display: flex;
    flex-direction: column; /* Stacks canvas and label vertically */
    align-items: center; /* Centers canvas and label horizontally */
    gap: 2px; /* Reduced from 5px: LESS SPACE BETWEEN THE JOYSTICK CANVAS AND ITS LABEL */
    width: 90px; /* CRITICAL CHANGE: Increased width for larger joysticks */
    /* Ensure it doesn't flex-grow */
    flex-shrink: 0;
    flex-grow: 0;
}

/* Wrapper specifically for the joystick canvas to define its size and appearance */
.joystick-canvas-wrapper {
    position: relative;
    width: 90px; /* CRITICAL CHANGE: Increased size for the circular joystick base */
    height: 90px; /* CRITICAL CHANGE: Increased size for the circular joystick base */
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: #3a3a3a; /* Darker background for the base */
    border-radius: 50%; /* Makes it a perfect circle */
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5); /* Inner shadow for depth */
    overflow: hidden; /* Ensure overflow is hidden to strictly contain the circle */
}

/* The canvas element itself where the joystick is drawn */
.joystick-canvas {
    background-color: transparent; /* No background, wrapper handles it */
    border: 2px solid #555; /* Light grey border for the base circle */
    border-radius: 50%; /* Makes it a perfect circle */
    touch-action: none; /* Prevents default touch actions like scrolling/zooming */
    width: 100%; /* Canvas fills its wrapper */
    height: 100%; /* Canvas fills its wrapper */
}

/* Cursor when actively dragging - this rule is still useful for visual feedback */
.joystick-canvas:active {
    cursor: grabbing;
}

/* Status text (now a regular block element, centered below both joysticks) */
.joystick-status {
    text-align: center; /* Center the text horizontally within its new flow */
    margin-top: 5px; /* Add some space above it */
    margin-bottom: 5px; /* Add some space below it */
    font-size: 0.65em;
    color: #aaa;
    white-space: nowrap; /* Ensures text stays on one line */
}

.joystick-status.connected {
    color: #4CAF50; /* Green for connected status */
}

.joystick-status.error {
    color: #F44336; /* Red for error status */
}

/* NEW: Style for the overall joystick functionality label */
.joystick-overall-label {
    text-align: center;
    font-size: 0.7em; /* Slightly smaller than status, but readable */
    color: #e0e0e0; /* Light text color, similar to general text */
    margin-top: 5px; /* Small space above it */
    margin-bottom: 5px; /* Small space below it */
    padding: 2px 5px; /* A little padding */
    background-color: #3a3a3a; /* Darker background for distinction */
    border-radius: 4px; /* Slightly rounded corners */
    width: 95%; /* Match width of other central blocks */
    max-width: 300px; /* Match max-width of slider section for alignment */
    white-space: nowrap; /* Ensures text stays on one line */
}

/* Section for the Max Velocity slider (renamed from .controls-section) */
.velocity-slider-section { /* Renamed from .controls-section */
    display: flex;
    flex-direction: column;
    gap: 10px; /* Reduced vertical space between elements in this section */
    width: 95%; /* Adjusted width */
    max-width: 300px; /* Reduced maximum width for this section */
    background-color: #3a3a3a; /* Darker background */
    padding: 10px; /* Reduced padding */
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
    margin-top: 5px; /* Add some space above this section */
}

/* Group for the velocity slider and its label/value */
.velocity-control-group {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px; /* Reduced space between label and slider */
}

.velocity-control-group label {
    font-size: 0.9em; /* Reduced font size for label */
    font-weight: bold;
    color: #e0e0e0;
    white-space: nowrap; /* Ensures text stays on one line */
}

/* Styling for the range input (slider) */
.velocity-control-group input[type="range"] {
    width: 100%;
    -webkit-appearance: none; /* Remove default WebKit appearance */
    height: 5px; /* Reduced height of the slider track */
    background: #555; /* Slider track color */
    outline: none;
    border-radius: 3px;
    transition: opacity .2s;
}

/* Styling for the slider thumb (the draggable part) */
.velocity-control-group input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 14px; /* Reduced thumb size */
    height: 14px; /* Reduced thumb size */
    border-radius: 50%;
    background: #f84632; /* Red thumb color */
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.velocity-control-group input[type="range"]::-moz-range-thumb {
    width: 14px; /* Reduced thumb size for Firefox */
    height: 14px; /* Reduced thumb size for Firefox */
    border-radius: 50%;
    background: #f84632;
    cursor: pointer;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* Styling for the displayed velocity value */
.velocity-value {
    font-weight: bold;
    color: #f84632;
    margin-left: 5px;
    font-size: 0.9em; /* Reduced font size */
    white-space: nowrap; /* Ensures text stays on one line */
}

/* Heading for "Current Joint Velocities" (now a standalone element) */
h3 {
    font-size: 1em; /* Reduced heading size */
    margin-bottom: 5px;
    margin-top: 0; /* No top margin as it follows other elements */
    white-space: nowrap; /* Ensures text stays on one line */
}

/* Container for displaying individual joint velocity values (now a standalone element) */
.joint-display {
    display: flex;
    flex-wrap: wrap; /* Allows joint values to wrap if space is limited */
    gap: 8px; /* Reduced space between joint value spans */
    justify-content: center;
    margin-top: 5px; /* Add some space above it */
    font-size: 0.8em; /* Reduced font size for joint values */
    width: 95%; /* Give it a width to center content */
    max-width: 350px; /* Match max-width of slider section for alignment */
}

/* Individual span for each joint's velocity display */
.joint-value {
    background-color: #444; /* Darker background for each value box */
    padding: 4px 8px; /* Reduced padding */
    border-radius: 4px;
    color: #4CAF50; /* Green color for active values */
    min-width: 70px; /* Reduced minimum width for value boxes */
    text-align: center;
    white-space: nowrap; /* Ensures text stays on one line */
}

/* Styling for zero velocity values */
.joint-value.zero {
    color: #aaa; /* Grey color for zero values */
}

/* Media query for smaller screens (e.g., mobile) - ensures layout is still reasonable */
@media (max-width: 768px) {
    .joystick-canvas-wrapper {
        width: 90px; /* Keep consistent with desktop */
        height: 90px;
    }
    .joystick-group {
        width: 90px; /* Keep consistent with desktop */
    }
    .joysticks-wrapper {
        flex-direction: row; /* Forces row on small screens if possible */
        flex-wrap: wrap; /* Keep wrap to allow stacking if space is EXTREMELY limited */
        gap: 5px; /* Keep consistent with desktop */
    }
    .velocity-slider-section, /* Apply to the new section name */
    .joint-display, /* Apply to the now independent joint display */
    .joystick-overall-label { /* Apply to the new overall label */
        width: 95%; /* Adjust width for small screens */
    }
    .arm-control-container {
        width: 100%; /* Allow full width on small screens */
        margin-left: 0; /* Remove fixed margin on small screens */
        margin-right: 0;
    }
}
